<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Heart Test</title>
</head>
<body>
  <canvas id="heart-canvas" width="320" height="340"></canvas>
  <script>
    const canvas = document.getElementById('heart-canvas');
    const ctx = canvas.getContext('2d');
    const W = canvas.width, H = canvas.height, N = 120, points = [];
    for(let i=0;i<N;i++){
      let t = Math.PI*2 * (i/(N-1));
      let x = 160 + 120 * Math.pow(Math.sin(t),3);
      let y = 170 -70*(15*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t))/16;
      points.push({x:x,y:y});
    }
    let particles = [];
    for(let i=0;i<N;i++){
      particles.push({ x:Math.random()*W, y:H+60, tx:points[i].x, ty:points[i].y, p: Math.random()*0.3+0.7 });
    }
    let tick=0;
    function drawLeaf(x,y,r,clr){
      ctx.save();
      ctx.translate(x,y); ctx.rotate(r);
      ctx.beginPath();
      ctx.ellipse(0,0,7,18,0,0,Math.PI*2);
      ctx.fillStyle=clr;
      ctx.shadowColor='#dcafec55'; ctx.shadowBlur=4;
      ctx.fill();
      ctx.restore();
    }
    const clrs = ['#d2ffc7','#fbe1fe','#f9b1d5','#babcfe','#fcb9c6'];
    function animate() {
      ctx.clearRect(0,0,W,H);
      for(let i=0;i<N;i++){
        let p=particles[i];
        let spd = .07*p.p+.015*Math.min(1,(tick/120));
        if(Math.abs(p.x-p.tx)>1 || Math.abs(p.y-p.ty)>1){
          p.x += (p.tx-p.x)*spd;
          p.y += (p.ty-p.y)*spd;
        }
        drawLeaf(p.x,p.y,(tick/28+i)*p.p,clrs[i%clrs.length]);
      }
      tick++;
      if(tick<120) requestAnimationFrame(animate);
    }
    animate();
  </script>
</body>
</html>
